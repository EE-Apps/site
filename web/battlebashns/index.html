<html>
<head>
    <title>Battlebashns</title>

    <link rel="stylesheet" href="eelibs/import.css">
    <link rel="stylesheet" href="css/place.css">
    <link rel="stylesheet" href="css/ai.css">
    <link rel="stylesheet" href="css/interface.css">
    <link rel="stylesheet" href="css/home.css">
</head>
<body>
    <div id="homePage" class="page active">
        <h1>Battlebashns</h1>
        <div class="homeBtns">
            <button id="btnSinglePlayer">Single Player (vs Bot)</button>
            <button id="btnMultiplayer">Multiplayer (vs Human)</button>
        </div>
        <!--div>
            <label><input type="checkbox" id="chkUseAI"> Use AI for suggestions</label>
        </div-->
    </div>
    <div id="lobbyPage" class="page">
        <h2>Lobby</h2>
        <div id="roomsList" style="margin-top:12px; border:1px solid #888; padding:8px; max-height:300px; overflow-y:auto;">
            <!-- Сюда будут добавляться комнаты -->
        </div>
        <div style="margin-top:12px;">
            <button id="btnCreateRoom">Create New Room</button>
            <button id="btnRefreshRooms" onclick="renderRooms(window.cloud)">Refresh Rooms</button>
        </div>
    </div>
    <div id="chatPage" class="page">
        <h2>P2P Chat - <span id="chatStatus" style="color:#f00;">Waiting for peer...</span></h2>
        <div id="chatMessages" style="border:1px solid #888; padding:8px; height:300px; overflow-y:auto; background:#f9f9f9; margin-bottom:8px; font-family:monospace; font-size:12px;">
            <!-- Сюда будут добавляться сообщения -->
        </div>
        <div style="display:flex; gap:8px;">
            <input type="text" id="chatInput" placeholder="Type a message..." style="flex:1; padding:6px;" />
            <button id="btnSendMessage" onclick="sendChatMessage()" disabled>Send</button>
            <button id="btnBack" onclick="backToLobby()">Back to Lobby</button>
        </div>
    </div>
    <div id="connectPage" class="page">
        <!-- SimplePeer: поля для обмена сигналами -->
        <div id="webrtcControls" style="margin:12px 0; padding:8px; border:1px dashed #888;">
        <label><input type="checkbox" id="isInitiator"> Я инициатор (создать offer)</label>
        <div style="margin-top:6px;">
            <button id="btnCreateSignal">Create / Update local signal</button>
            <button id="btnAcceptRemote">Accept remote signal</button>
        </div>

        <div style="display:flex; gap:8px; margin-top:6px;">
            <div style="flex:1;">
            <div>Local signal (скопируй и отправь другому):</div>
            <textarea id="localSignal" rows="6" style="width:100%"></textarea>
            </div>
            <div style="flex:1;">
            <div>Remote signal (вставь сюда и нажми Accept):</div>
            <textarea id="remoteSignal" rows="6" style="width:100%"></textarea>
            </div>
        </div>

        <div style="margin-top:6px;">
            <span id="connStatus">Status: not connected</span>
        </div>
        </div>
    </div>
    <div id="gamePage" class="page">
        <div class="gameHead">
            <!-- Кнопка конца хода -->
            <div style="margin:8px 0;">
                <button id="nextTurn">NEXT</button>
            </div>
            <div class="gameHeadOptions">
                <div class="settingrow"><input id="use" type="checkbox"><img src="img/fortress.png"></div>
                <div class="settingrow"><b>Score:</b><p id="scoreCount">4</p></div>
            </div>
        </div>
        <div class="gameHeadBottom">
            <div class="gameHeadBottomLeft">
                <span id="turnInfo" style="margin-left:10px">Turn of</span>
                <span style="margin-left:10px">Turns: <span id="turnCountEl">0</span></span>
            </div>
            <div class="gameHeadBottomRight">
                <span style="margin-right:10px">Red: <span id="redCountEl">0</span></span>
                <span style="margin-right:10px">Blue: <span id="blueCountEl">0</span></span>
            </div>
        </div>
        <div id="gamecontent">
            <table id="gametable"></table>
        </div>
    </div>

    <!-- модальное окно (скрыто по умолчанию) -->
    <div id="cellModal" class="modal" style="display:none;">
    <div class="modal-content">
        <span id="modalClose" class="modal-close">&times;</span>
        <h3>Настройки клетки</h3>

        <div>
        <label>Token:</label><br>
        <label><input type="radio" name="token" value="" checked> none</label>
        <label><input type="radio" name="token" value="one"> one</label>
        <label><input type="radio" name="token" value="two"> two</label>
        </div>

        <div style="margin-top:8px;">
        <label><input type="checkbox" id="chkCastle"> castle</label>
        <label style="margin-left:10px;"><input type="checkbox" id="chkFortress"> fortress</label>
        </div>

        <div style="margin-top:12px;">
        <button id="saveCell">Сохранить</button>
        <button id="cancelCell">Отмена</button>
        </div>
    </div>
    </div>
</body>
    <script src="eelibs/import.js" type="module"></script>
    <script src="https://unpkg.com/simple-peer@9.11.1/simplepeer.min.js"></script>
    <script src="js/lobby.js"></script>
    <script src="js/home.js" type="module"></script>
    <!--script src="js/peer.js"></script-->
    <script src="js/game.js"></script>
    <script src="js/bot.js"></script>
</html>